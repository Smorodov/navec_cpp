#include <fstream>
#include "cnpy.h"

#define COUT_VAR(x) std::cout << #x"=" << x << std::endl;
#define SHOW_IMG(x) cv::namedWindow(#x);cv::imshow(#x,x);cv::waitKey(20);
//--------------------------------------------------------------------------
//
//--------------------------------------------------------------------------
class navec
{
public:    
    int vectors;
    int dim;
    int qdim;
    int centroids;
    cnpy::npz_t npz_map;
    cnpy::NpyArray indexes;
    cnpy::NpyArray codes;
    cnpy::NpyArray norm;
    cnpy::NpyArray ab;
    std::map<std::string, size_t> words_map;
    // ----------------------------
    navec();
    ~navec();
public:
    //--------------------------------------------------------------------------
    //
    //--------------------------------------------------------------------------
    void loadModel(std::string filename, std::string words_filename);
    //--------------------------------------------------------------------------
    //
    //--------------------------------------------------------------------------
    void precompute(void);
    //--------------------------------------------------------------------------
    //
    //--------------------------------------------------------------------------
    float similarity(std::string a, std::string b);
    //--------------------------------------------------------------------------
    //
    //--------------------------------------------------------------------------
};
